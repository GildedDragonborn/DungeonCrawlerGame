import pygame
import random
import math
from typing import List, Tuple
from enemy import enemy
import os

#TODO: this class acts as a single room that is generated by a random floor generator. Implement both


class room:
    def __init__(self, id: int, layer: int, x: int, y: int, enemies: bool):
        self.__roomID = int(id)
        self.__layer = layer
        self.__roomLayout = self.getRoom(id)
        self.__xCoord = x
        self.__yCoord = y
        self.__hostile: bool = enemies
        self.__enemies: List[Tuple[int,int,enemy]] = []  # x,y,Enemytype tuple((0, 0, None))

    def roomID(self) -> int:
        return self.__roomID

    def hostile(self) -> bool:
        return self.__hostile

    def getEnemies(self):
        return self.__enemies

    def xCoord(self) -> int:
        return self.__xCoord

    def yCoord(self) -> int:
        return self.__yCoord

    def setEnemy(self, x: int, y: int, new: enemy):
        for i in self.__enemies:
            if i[0] == x or i[1] == y:
                return
        self.__enemies.append(tuple((x, y, new)))

    def getRoom(self, id: int):
        blank = [[0] * 12 for i in range(9)]
        return blank



    def drawRoom(self):
        width = 800
        height = 600
        screen = pygame.display.set_mode((width, height))
        screen.fill((200, 200, 200))
        lineColor = pygame.Color(0, 0, 0, 255)  # RGB alpha
        x = 0
        y = 0
        increment = width / 12
        while x <= width:
            start = [x, 0]
            end = [x, height]
            pygame.draw.line(screen, lineColor, start, end, width=2)
            x += increment
        while y <= height:
            start = [0, y]
            end = [width, y]
            pygame.draw.line(screen, lineColor, start, end, width=2)
            y += increment
        for i in range(12):
            for j in range(9):
                if self.__roomLayout[int(j)][int(i)] == 0:  # Empty Space
                    pass
                elif self.__roomLayout[int(j)][int(i)] == 1:  # Door
                    pass
                elif self.__roomLayout[int(j)][int(i)] == 2:  # Rock
                    screen.blit(pygame.image.load(os.path.join("Assets", "testRock.png")), (int(i)*67, int(j)*67))
                elif self.__roomLayout[int(j)][int(i)] == 3: # Enemy (check enemy list)
                    pass
                elif self.__roomLayout[int(j)][int(i)] == 4: # Hazard
                    pass
                elif self.__roomLayout[int(j)][int(i)] == 5: # BossdoorL
                    pass
                elif self.__roomLayout[int(j)][int(i)] == 6: # BossdoorR
                    pass
        # use roomLayout to print out the room
        # 0 = blank
        # 1 = 4 doors empty
        # 2 = 3 doors (Up, Left, Down)
        # 3 = 2 doors (Up, Down)
        # 4 = 2 doors (Up, Left)
        # 5 = 2 doors (Down, Left)
        # 6 = End (Up)
        # 7 = End (Down)
        # 8 = End (Left)
        # 9 = 3 doors (Up, Right, Down)
        # 10 = 2 doors (Up, Right)
        # 11 = 2 doors (Down, Right)
        # 12 = End (Right)
        # 13 = Shop
        # 14 = Item Room
        # 15 = Bank
        # 16 = MinibossRoom
        # 17 = bossRoom
